<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food AI Detector</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

    <div id="effects-container"></div>

    <div id="winner-overlay" class="winner-overlay d-none">
        <div class="winner-content">
            <div class="winner-glow"></div>
            <div class="winner-icon" id="winner-icon">ðŸŽ‰</div>
            <h1 class="winner-title" id="winner-label">RESULTADO</h1>
            <p class="winner-subtitle">Confianza: <span id="winner-confidence">0%</span></p>
            <button id="btn-reset" class="btn btn-light btn-lg rounded-pill mt-4 px-5 fw-bold">
                <i class="bi bi-arrow-repeat"></i> Analizar Otro
            </button>
        </div>
    </div>

    <audio id="sound-fruta" src="/static/audio/fruta.mp3"></audio>
    <audio id="sound-lacteo" src="/static/audio/lacteo.mp3"></audio>
    <audio id="sound-grano" src="/static/audio/grano.mp3"></audio>

    <div class="main-wrapper">
        <div class="glass-card">
            <header class="text-center mb-4">
                <h1 class="display-6 fw-bold">AI Food Scanner</h1>
                <p class="text-muted">Detecta Frutas, Granos o LÃ¡cteos</p>
            </header>

            <div class="nav nav-pills nav-fill mb-4" id="pills-tab" role="tablist">
                <button class="nav-link active" id="btn-tab-upload">
                    <i class="bi bi-cloud-upload-fill"></i> Subir Imagen
                </button>
                <button class="nav-link" id="btn-tab-camera">
                    <i class="bi bi-camera-fill"></i> Usar CÃ¡mara
                </button>
            </div>

            <div id="upload-section" class="fade-in">
                <div class="upload-area" id="drop-area">
                    <i class="bi bi-images display-4 mb-2"></i>
                    <p>Toca para seleccionar</p>
                    <input class="file-input" type="file" id="file-upload" accept="image/png, image/jpeg, image/webp">
                </div>
                <img id="image-preview-upload" src="" alt="Vista previa" class="preview-img d-none mt-3" />
            </div>

            <div id="camera-section" class="d-none fade-in">
                <div class="video-container">
                    <video id="camera-view" autoplay playsinline></video>
                    <canvas id="camera-canvas" class="d-none"></canvas>
                </div>
                <button id="btn-snapshot" class="btn btn-dark w-100 mt-3 rounded-pill">
                    <i class="bi bi-circle-fill text-danger"></i> Capturar
                </button>
                <img id="image-preview-camera" src="" class="preview-img d-none mt-3" />
            </div>

            <div class="d-grid gap-2 mt-4">
                <button class="btn btn-gradient btn-lg shadow-sm" type="button" id="btn-classify">
                    <span id="spinner" class="spinner-border spinner-border-sm d-none" role="status"></span>
                    <span id="btn-text">Analizar Alimento</span>
                </button>
            </div>

            <div class="text-center mt-4">
                 <a href="/ayuda" class="text-decoration-none text-secondary small">Â¿Ayuda con las fotos?</a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
